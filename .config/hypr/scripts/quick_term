
#!/bin/bash

# The unique class name we assign to our Alacritty terminal
APP_CLASS="quick-term"

# Check if a window with the specified initial class already exists.
# We use hyprctl to get all client info in JSON, then jq to parse it.
# We select the window where 'initialClass' matches our APP_CLASS and get its address.
# Using 'initialClass' is often more reliable for Alacritty.
WINDOW_ADDRESS=$(hyprctl clients -j | jq -r --arg app_class "$APP_CLASS" '.[] | select(.initialClass == $app_class) | .address')

# If the WINDOW_ADDRESS variable is not empty, a window was found
if [ -n "$WINDOW_ADDRESS" ]; then
    # Close the existing window using its address
    hyprctl dispatch closewindow address:"$WINDOW_ADDRESS"
else
    # No window found, so we launch a new one
    alacritty --class "$APP_CLASS"
fi
